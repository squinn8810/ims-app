"use strict";(self.webpackChunkims_ui=self.webpackChunkims_ui||[]).push([[720],{5720:(C,p,o)=>{o.r(p),o.d(p,{HomeComponent:()=>v});var t=o(9468),g=o(6814),u=o(4472);function m(a,T){1&a&&(t.TgZ(0,"div",2),t._UZ(1,"div",3),t.qZA())}function c(a,T){1&a&&(t.TgZ(0,"div"),t._UZ(1,"div",4),t.TgZ(2,"div",5)(3,"div",6),t._UZ(4,"div",7),t.qZA(),t.TgZ(5,"div",6),t._UZ(6,"div",8),t.qZA()()())}let w=(()=>{class a{constructor(e){this.scannerService=e,this.chartReady=new t.vpe,this.loading=!0}ngOnInit(){this.getDataView(),setTimeout(()=>{this.loading=!1},1e4)}getDataView(){this.scannerService.getDataView().subscribe(e=>{this.data=e,this.loading=!1,this.drawTableChart(),this.drawLineChart(),this.drawPieChart()},e=>{console.error("Error fetching data:",e)})}drawTableChart(){const e=this.data.recentTransactions;google.charts.load("current",{packages:["table"]}),google.charts.setOnLoadCallback(()=>{const n=new google.visualization.DataTable,r=Object.keys(e[0]);r.forEach(s=>{n.addColumn(typeof e[0][s],s)}),e.forEach(s=>{const h=r.map(b=>s[b]);n.addRow(h)}),new google.visualization.Table(document.getElementById("table_div")).draw(n,{title:"Recent Removals",showRowNumber:!0,width:"100%",height:"100%"})})}drawLineChart(){const e=this.data.transactionTrends;google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(()=>{const n=new google.visualization.DataTable;n.addColumn("string","Date"),n.addColumn("number","Transactions"),Object.keys(e).forEach(s=>{n.addRow([s,e[s]])}),new google.visualization.LineChart(document.getElementById("trend_div")).draw(n,{title:"Usage Trends",width:900,height:600,hAxis:{gridlines:{}},vAxis:{gridlines:{count:10},minValue:0}})})}drawPieChart(){const e=this.data.transactionDistribution;google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(()=>{const n=new google.visualization.DataTable;n.addColumn("string","Item"),n.addColumn("number","Reorders"),Object.keys(e).forEach(s=>{n.addRow([s,e[s]])}),new google.visualization.PieChart(document.getElementById("pie_div")).draw(n,{title:"Transaction Distributions",sliceVisibilityThreshold:.05})})}static#t=this.\u0275fac=function(n){return new(n||a)(t.Y36(u.L))};static#n=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-chart"]],inputs:{recentTransactions:"recentTransactions",transactionDistribution:"transactionDistribution",transactionTrends:"transactionTrends"},outputs:{chartReady:"chartReady"},standalone:!0,features:[t.jDz],decls:3,vars:2,consts:[["class","loading-animation",4,"ngIf"],[4,"ngIf"],[1,"loading-animation"],[1,"spinner"],["id","table_div"],[1,"row"],[1,"col-md-6"],["id","trend_div"],["id","pie_div",2,"width","100%","height","500px"]],template:function(n,r){1&n&&(t.TgZ(0,"div"),t.YNc(1,m,2,0,"div",0),t.YNc(2,c,7,0,"div",1),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngIf",r.loading),t.xp6(1),t.Q6J("ngIf",!r.loading))},dependencies:[g.O5],styles:[".loading-animation[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:200px}.spinner[_ngcontent-%COMP%]{border:4px solid rgba(0,0,0,.1);border-radius:50%;border-top:4px solid #3498db;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})}return a})();var i=o(9962),d=o(1076);let v=(()=>{class a{constructor(e,n){this.loginService=e,this.router=n}ngOnInit(){}logout(){this.loginService.logout().subscribe(()=>{localStorage.removeItem("access_token"),this.router.navigate(["/login"])})}static#t=this.\u0275fac=function(n){return new(n||a)(t.Y36(i.r),t.Y36(d.F0))};static#n=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-home"]],standalone:!0,features:[t.jDz],decls:4,vars:0,consts:[[1,"row","text-center"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"h3"),t._uU(2,"Data Dashboard"),t.qZA()(),t._UZ(3,"app-chart"))},dependencies:[w]})}return a})()},4472:(C,p,o)=>{o.d(p,{L:()=>m});var t=o(9862),g=o(4664),u=o(9468);let m=(()=>{class c{constructor(i){this.http=i,this.options={headers:new t.WM({Accept:"application/json","Content-Type":"application/json"})}}postScan(i){return this.http.get("/sanctum/csrf-cookie",this.options).pipe((0,g.w)(()=>this.http.post("/api/scan",i,this.options)))}getDataView(){return this.http.get("api/reports",this.options)}getReportView(i,d){const a={params:(new t.LE).set("itemLocID",i).set("time_period",d)};return this.http.get("api/reports",a)}getScannedList(){return this.http.get("/api/scanned-list",this.options)}sendNotification(i){return this.http.get("/sanctum/csrf-cookie",this.options).pipe((0,g.w)(()=>this.http.post("/api/send-restock-notification",i,this.options)))}static#t=this.\u0275fac=function(d){return new(d||c)(u.LFG(t.eN))};static#n=this.\u0275prov=u.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()}}]);