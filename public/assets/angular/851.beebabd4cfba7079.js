"use strict";(self.webpackChunkims_ui=self.webpackChunkims_ui||[]).push([[851],{4851:(y,l,c)=>{c.r(l),c.d(l,{RestockComponent:()=>R});var _=c(6814),m=c(2715),u=c(592),s=c(95),d=c(5181),t=c(9468),f=c(4472),p=c(1076);function g(e,r){if(1&e&&(t.TgZ(0,"div",12),t._uU(1),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.hij(" ",n.error.error.message," ")}}function h(e,r){1&e&&(t.TgZ(0,"div",13),t._uU(1," Scan Success "),t.qZA())}function v(e,r){1&e&&(t.TgZ(0,"p",14),t._uU(1," No Scans To Show. "),t.qZA())}function S(e,r){1&e&&(t.TgZ(0,"div")(1,"h5",15),t._uU(2,"Scanned Items"),t.qZA()())}function T(e,r){1&e&&(t.TgZ(0,"div",5)(1,"h5"),t._uU(2,"Notification Sent!"),t.qZA()())}function Z(e,r){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==n?null:n.message," ")}}function I(e,r){if(1&e&&(t.TgZ(0,"div",14),t.YNc(1,Z,2,1,"div",7),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",!n.notification)}}function x(e,r){1&e&&(t.TgZ(0,"div",23),t._uU(1," Quantity of item you're adding to inventory is required. "),t.qZA())}function E(e,r){1&e&&(t.TgZ(0,"div",23),t._uU(1," Quantity should be a number. "),t.qZA())}function C(e,r){if(1&e&&(t.TgZ(0,"button",24),t._uU(1,"Send Notification"),t.qZA()),2&e){const n=t.oxw(2);t.Q6J("disabled",n.scanForm.invalid)}}function L(e,r){if(1&e){const n=t.EpF();t.TgZ(0,"div",16)(1,"form",17),t.NdJ("ngSubmit",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.sendNotification(i.scanForm))}),t.TgZ(2,"div",5)(3,"label",18),t._uU(4,"What is the quantity being added to inventory?"),t.qZA(),t._UZ(5,"input",19),t.YNc(6,x,2,0,"div",20),t.YNc(7,E,2,0,"div",20),t.TgZ(8,"div",21),t.YNc(9,C,2,1,"button",22),t.qZA()()()()}if(2&e){const n=t.oxw();let o,i;t.xp6(1),t.Q6J("formGroup",n.scanForm),t.xp6(5),t.Q6J("ngIf",(null==(o=n.scanForm.get("itemQty"))?null:o.hasError("required"))&&(null==(o=n.scanForm.get("itemQty"))?null:o.touched)),t.xp6(1),t.Q6J("ngIf",(null==(i=n.scanForm.get("itemQty"))?null:i.hasError("itemQty"))&&(null==(i=n.scanForm.get("itemQty"))?null:i.touched)),t.xp6(2),t.Q6J("ngIf",!n.notification)}}let R=(()=>{class e{constructor(n,o,i){this.scannerService=n,this.router=o,this.formBuilder=i,this.itemLocation={scannedList:[]}}ngOnInit(){this.notification=!1,this.scannerOpen=!1,this.getScannedList(),this.openNewScanner(),this.scanForm=this.formBuilder.group({itemQty:new s.NI("",[s.kI.required,s.kI.pattern("^[0-9]*$")])})}onScanSuccess(n,o){console.log("Code matched = "+n+", "+o);let i=new u.M(n,!1);this.scannerService.postScan(i).subscribe(a=>{this.itemLocation=a,this.scanSuccess=!0},a=>{this.error=a}),this.codeScanner.clear(),this.scannerOpen=!1}onScanFailure(n,o){}getScannedList(){this.scannerService.getScannedList().subscribe(n=>{this.itemLocation=n})}openNewScanner(){this.getScannerSize(),this.createScanner()}getScannerSize(){let n=Math.min(window.innerWidth,window.innerHeight);this.qrBoxSize=Math.floor(.7*n)}createScanner(){this.scannerOpen||(this.scanSuccess=!1,this.codeScanner=new m.wF("qr-reader",{fps:10,qrbox:{width:this.qrBoxSize,height:this.qrBoxSize}},!1),this.codeScanner.render((n,o)=>this.onScanSuccess(n,o),(n,o)=>this.onScanFailure(n,o)),this.scannerOpen=!0)}sendNotification(n){let o=new d.x(n.get("itemQty")?.value);this.scannerService.sendRestockNotification(o).subscribe(i=>{console.log("Notification sent successfully. Response:",i),this.notification=!0,setTimeout(()=>{this.router.navigate(["/home"])},1e3)},i=>{console.error("Error sending notification:",i)})}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(f.L),t.Y36(p.F0),t.Y36(s.qu))};static#n=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-restock"]],standalone:!0,features:[t.jDz],decls:15,vars:7,consts:[[1,"container"],[1,"row","text-center"],[1,"mt-3"],["class","mt-3 alert alert-danger col-9","role","alert",4,"ngIf"],["class","mt-3 alert alert-success col-9","role","alert",4,"ngIf"],[1,"row"],["class","col-9",4,"ngIf"],[4,"ngIf"],["class","row",4,"ngIf"],["class","col-9",4,"ngFor","ngForOf"],["class","row col-9",4,"ngIf"],["id","qr-reader"],["role","alert",1,"mt-3","alert","alert-danger","col-9"],["role","alert",1,"mt-3","alert","alert-success","col-9"],[1,"col-9"],[1,"col-12"],[1,"row","col-9"],["nonvalidate","",3,"formGroup","ngSubmit"],["for","itemQty","required","",1,"form-label"],["type","itemQty","formControlName","itemQty",1,"form-control","col-9"],["class","error col-9",4,"ngIf"],[1,"btn","btn-primary","col-4"],["type","submit","class","btn btn-primary col-4",3,"disabled",4,"ngIf"],[1,"error","col-9"],["type","submit",1,"btn","btn-primary","col-4",3,"disabled"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),t._uU(3,"Send Notification"),t.qZA()(),t.YNc(4,g,2,1,"div",3),t.YNc(5,h,2,0,"div",4),t.TgZ(6,"div",5),t.YNc(7,v,2,0,"p",6),t.qZA(),t.YNc(8,S,3,0,"div",7),t.YNc(9,T,3,0,"div",8),t.TgZ(10,"div",5),t.YNc(11,I,2,1,"div",9),t.qZA(),t._UZ(12,"p"),t.YNc(13,L,10,4,"div",10),t._UZ(14,"div",11),t.qZA()),2&o&&(t.xp6(4),t.Q6J("ngIf",i.error),t.xp6(1),t.Q6J("ngIf",i.scanSuccess),t.xp6(2),t.Q6J("ngIf",!(null!=i.itemLocation&&i.itemLocation.scannedList)),t.xp6(1),t.Q6J("ngIf",(null==i.itemLocation?null:i.itemLocation.scannedList)&&!i.notification),t.xp6(1),t.Q6J("ngIf",i.notification),t.xp6(2),t.Q6J("ngForOf",null==i.itemLocation?null:i.itemLocation.scannedList),t.xp6(2),t.Q6J("ngIf",!i.notification&&!i.scannerOpen))},dependencies:[s.UX,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,_.O5,_.ax]})}return e})()}}]);