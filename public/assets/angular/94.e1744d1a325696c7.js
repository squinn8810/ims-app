"use strict";(self.webpackChunkims_ui=self.webpackChunkims_ui||[]).push([[94],{6094:(O,l,s)=>{s.r(l),s.d(l,{NotificationComponent:()=>L});var _=s(6814),m=s(2715),f=s(592),c=s(95),u=s(5181),n=s(9468),d=s(4472),p=s(1076);function g(i,a){if(1&i&&(n.TgZ(0,"div",12),n._uU(1),n.qZA()),2&i){const t=n.oxw();n.xp6(1),n.hij(" ",t.error.error.message," ")}}function h(i,a){1&i&&(n.TgZ(0,"div",13),n._uU(1," Scan Success "),n.qZA())}function v(i,a){1&i&&(n.TgZ(0,"p",14),n._uU(1," No Scans To Show. "),n.qZA())}function S(i,a){1&i&&(n.TgZ(0,"div")(1,"h5",15),n._uU(2,"Scanned Items"),n.qZA()())}function N(i,a){1&i&&(n.TgZ(0,"div",5)(1,"h5"),n._uU(2,"Notification Sent!"),n.qZA()())}function T(i,a){if(1&i&&(n.TgZ(0,"div"),n._uU(1),n.qZA()),2&i){const t=n.oxw().$implicit;n.xp6(1),n.hij(" ",null==t?null:t.message," ")}}function Z(i,a){if(1&i&&(n.TgZ(0,"div",14),n.YNc(1,T,2,1,"div",7),n.qZA()),2&i){const t=n.oxw();n.xp6(1),n.Q6J("ngIf",!t.notification)}}function I(i,a){1&i&&(n.TgZ(0,"div",23),n._uU(1," Quantity of item you're restocking is required. "),n.qZA())}function x(i,a){1&i&&(n.TgZ(0,"div",23),n._uU(1," Quantity should be a number. "),n.qZA())}function E(i,a){if(1&i&&(n.TgZ(0,"button",24),n._uU(1,"Send Notification"),n.qZA()),2&i){const t=n.oxw(2);n.Q6J("disabled",t.scanForm.invalid)}}function C(i,a){if(1&i){const t=n.EpF();n.TgZ(0,"div",16)(1,"form",17),n.NdJ("ngSubmit",function(){n.CHM(t);const e=n.oxw();return n.KtG(e.sendNotification(e.scanForm))}),n.TgZ(2,"div",5)(3,"label",18),n._uU(4,"How many items are in stock?"),n.qZA(),n._UZ(5,"input",19),n.YNc(6,I,2,0,"div",20),n.YNc(7,x,2,0,"div",20),n.TgZ(8,"div",21),n.YNc(9,E,2,1,"button",22),n.qZA()()()()}if(2&i){const t=n.oxw();let o,e;n.xp6(1),n.Q6J("formGroup",t.scanForm),n.xp6(5),n.Q6J("ngIf",(null==(o=t.scanForm.get("itemQty"))?null:o.hasError("required"))&&(null==(o=t.scanForm.get("itemQty"))?null:o.touched)),n.xp6(1),n.Q6J("ngIf",(null==(e=t.scanForm.get("itemQty"))?null:e.hasError("itemQty"))&&(null==(e=t.scanForm.get("itemQty"))?null:e.touched)),n.xp6(2),n.Q6J("ngIf",!t.notification)}}let L=(()=>{class i{constructor(t,o,e){this.scannerService=t,this.router=o,this.formBuilder=e,this.itemLocation={scannedList:[]}}ngOnInit(){this.notification=!1,this.scannerOpen=!1,this.getScannedList(),this.openNewScanner(),this.scanForm=this.formBuilder.group({itemQty:new c.NI("",[c.kI.required,c.kI.pattern("^[0-9]*$")])})}onScanSuccess(t,o){console.log("Code matched = "+t+", "+o);let e=new f.M(t,!1);this.scannerService.postScan(e).subscribe(r=>{this.itemLocation=r,this.scanSuccess=!0},r=>{this.error=r}),this.codeScanner.clear(),this.scannerOpen=!1}onScanFailure(t,o){}getScannedList(){this.scannerService.getScannedList().subscribe(t=>{this.itemLocation=t})}openNewScanner(){this.getScannerSize(),this.createScanner()}getScannerSize(){let t=Math.min(window.innerWidth,window.innerHeight);this.qrBoxSize=Math.floor(.7*t)}createScanner(){this.scannerOpen||(this.scanSuccess=!1,this.codeScanner=new m.wF("qr-reader",{fps:10,qrbox:{width:this.qrBoxSize,height:this.qrBoxSize}},!1),this.codeScanner.render((t,o)=>this.onScanSuccess(t,o),(t,o)=>this.onScanFailure(t,o)),this.scannerOpen=!0)}sendNotification(t){let o=new u.x(t.get("itemQty")?.value);this.scannerService.sendNotification(o).subscribe(e=>{console.log("Notification sent successfully. Response:",e),this.notification=!0,setTimeout(()=>{this.router.navigate(["/home"])},1e3)},e=>{console.error("Error sending notification:",e)})}static#n=this.\u0275fac=function(o){return new(o||i)(n.Y36(d.L),n.Y36(p.F0),n.Y36(c.qu))};static#t=this.\u0275cmp=n.Xpm({type:i,selectors:[["app-notification"]],standalone:!0,features:[n.jDz],decls:15,vars:7,consts:[[1,"container"],[1,"row","text-center"],[1,"mt-3"],["class","mt-3 alert alert-danger col-9","role","alert",4,"ngIf"],["class","mt-3 alert alert-success col-9","role","alert",4,"ngIf"],[1,"row"],["class","col-9",4,"ngIf"],[4,"ngIf"],["class","row",4,"ngIf"],["class","col-9",4,"ngFor","ngForOf"],["class","row col-9",4,"ngIf"],["id","qr-reader"],["role","alert",1,"mt-3","alert","alert-danger","col-9"],["role","alert",1,"mt-3","alert","alert-success","col-9"],[1,"col-9"],[1,"col-12"],[1,"row","col-9"],["nonvalidate","",3,"formGroup","ngSubmit"],["for","itemQty","required","",1,"form-label"],["type","itemQty","formControlName","itemQty",1,"form-control","col-9"],["class","error col-9",4,"ngIf"],[1,"btn","btn-primary","col-4"],["type","submit","class","btn btn-primary col-4",3,"disabled",4,"ngIf"],[1,"error","col-9"],["type","submit",1,"btn","btn-primary","col-4",3,"disabled"]],template:function(o,e){1&o&&(n.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),n._uU(3,"Send Notification"),n.qZA()(),n.YNc(4,g,2,1,"div",3),n.YNc(5,h,2,0,"div",4),n.TgZ(6,"div",5),n.YNc(7,v,2,0,"p",6),n.qZA(),n.YNc(8,S,3,0,"div",7),n.YNc(9,N,3,0,"div",8),n.TgZ(10,"div",5),n.YNc(11,Z,2,1,"div",9),n.qZA(),n._UZ(12,"p"),n.YNc(13,C,10,4,"div",10),n._UZ(14,"div",11),n.qZA()),2&o&&(n.xp6(4),n.Q6J("ngIf",e.error),n.xp6(1),n.Q6J("ngIf",e.scanSuccess),n.xp6(2),n.Q6J("ngIf",!(null!=e.itemLocation&&e.itemLocation.scannedList)),n.xp6(1),n.Q6J("ngIf",(null==e.itemLocation?null:e.itemLocation.scannedList)&&!e.notification),n.xp6(1),n.Q6J("ngIf",e.notification),n.xp6(2),n.Q6J("ngForOf",null==e.itemLocation?null:e.itemLocation.scannedList),n.xp6(2),n.Q6J("ngIf",!e.notification&&!e.scannerOpen))},dependencies:[c.UX,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,_.O5,_.ax]})}return i})()}}]);